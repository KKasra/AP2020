<div dir = "rtl"> 


# AP 2020
## phase 4

لطفا این فایل را روی گیت هاب یا ادیتور های مخصوص md مشاهده کنید.


### منابع
عکس های استفاده شده از سایت `https://www.pngwing.com/en/`گرفته شده اند، برای رفع اشکال در پیاده سازی و استفاده از قابلیت های جاوا از سایت `stackoverflow` و `geeksforgeeks` کمک گرفتم و برای  رفع ابهامات داخل داک پروژه و البته طراحی عملکرد ها و ساختار قسمت هایی از پروژه از کمک و مشورت دوستانم عرفان موسویان و علی توسلی - با تشکر از زحمات و وقتی که گذاشتند - کمک گرفتم
.کتابخانه های استفاده شده در پروژه `hibernate core v.5.4.14.Final` و `H2database v.1.4.191` و البته برای کانفیگ (دک ریدر) `gson v.2.8.6` استفاده شده.

### روش کارکرد
نقطه شروع `client` و `Server	` از دو کلاس با همین اسم ها در پکیج `network	`  است، اجزای مربوط به برقراری ارتباط بین سرور و کلاینت در پکیج `network	 ` قرار دارند و بقیه پکیج ها هم مشابه آنچه در فاز قبل بود به شرح زیر هستند. برای اضافه کردن یک ویژگی به بازی در 		`tavern Brawl` باید یک پکیج برای آن در داخل پکیج `Game.gameStructure.freatures` ساخته شود، سپس یک فایل `jar	` از آن تولید شود، در نهایت با ورودی دادن اسم پکیج به `Server` از طریق ترمینال ویژگی های داخل پکیج به بازی اضافه می شوند، و در حالت غیر بازی عادی در این حالت اجرا می شود.



به طور کلی اجزا گرافیکی در پکیج `GUI` قرار دارند، که شامل فریم ها اجزای داخل صفحه ها در این پکیج هستند، اجزای مربوط به لاجیک بازی در پکیج `Game` قرار دارند، شامل مدل بازی (`game`) و کلاس اجرا کننده منطق بازی `gameProcessor` ، اجزا داخلی بازی شامل کارت ، هیرو و غیره ، و البته برای برقراری ارتباط بین دو قسمت لاجیک و گرافیک به صورت استریمی، از `Command design pattern` استفاده شده که کلاس های مربوط به `command ` ها همین پکیج (`game`) قرار دارند.

از نقاط قوت این پروژه متصل کردن لاجیک بازی به `client handler` که دستور هارا از روی شبکه از `client`	 تحویل می گیرد است، بدین ترتیب دسترسی 	`client handler	 ` به لاجیک بازی به طور کامل قطع شده است، همچنین در لاجیک بازی به کمک `chain of responsibility` هر دستوری که از سمت بازیکن دیده می شود یکبار قبل از اجرای دستور و یکبار بعد از آن به همه "ویژگی " های بازی- همه کارت ها ، پسیو ها ، قدرت های هیرو ها ، ویژگی های افزوده شده با `Reflection` و ...- داده می شود، و در مرحله اول اگر مغایرتی با قوانین بازی دیده شود، دستور توسط آنها رد می شود، در مرحله دوم هم این ویژگی ها اگر اثر جانبی ای از روی دستور بخواهند اعمال کنند، مثل `quest and reward` ها ، با گرفتن دستور، شرط اعمال اثر خود را بررسی می کنند و بعد اثر را اعمال می کنند.در نتیجه تقریبا هر نوع ویژگی ای می توان به کارت ها و یا قوانین بازی در حالت `tavern Brawl` اضافه کرد.




نقاط ضعف این فاز به طور عمده مربوط گرافیک بازی هستند، کارتها برای گذاشته شدن روی زمین درگ می شوند ولی به صورت انیمیشنی به سمت جایگاهشان حرکت نمی کنند، ضمن اینکه بعضی مواقع دستور ها با تاخیر اجرا می شوند، ضعف مهمی که در قسمت لاجیک وجود دارد، انتخاب نکردن سه کارت اول در بازی است و این سه تا کارت توسط سرور انتخاب می شوند.

### انتخاب ها
برای برقراری ارتباط بین سرور و کلاینت ها و در عین حال سرور به هر بازی در حال اجرا از `Command Design pattern` استفاده شده، ضمنا برای پیاده سازی ویژگی ها و قوانین بازی به طور عمده از `chain of responsibility` استفاده شده.
### کتابخانه ها
در پروژه از `maven` و 
ورژن جاوای پروژه `13` استفاده شده ، برای نگهداری کاربر ها و کارت ها از `hibernate core v.5.4.14` و `h2database v.1.4.191` ، و برای نگه داری کانفیگ ( deck reader) از `gson v.2.8.6` استفاده شده.
</div>